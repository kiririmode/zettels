---
id: 2025-11-29-160319
title: AI開発におけるガードレールの重要性
created: 2025-11-29 16:03:19
updated: 2025-11-29 16:03:19
tags:
  - zettel
  - ai
  - quality-management
  - design
source:
  type: article
  ref: "食べログ技術ブログ - 実装の9割をAIに任せる"
---

## 要約（Summary）

- ガードレールとは、AIの出力を制御するための制約条件やルールのこと
- AIは指示されていないことを「一般的な正解」で埋めるため、チーム固有のルールを明文化する必要がある
- フェーズごとに異なるガードレールを設定することで、AIの品質を担保できる

## 本文（Body）

AIを活用した開発では、AIの自由度を適切に制限する「ガードレール」の設計が成功の鍵となる。

### 背景・問題意識

自律型AIに完全移譲すると、以下の問題が発生した：
- チームの設計思想を無視した実装
- N+1問題などのパフォーマンス問題
- 一度修正したコードが勝手にロールバックされる

これらは「AIが暗黙的なルールを理解できない」ことに起因する。

### アイデア・主張

**フェーズごとに適切なガードレールを設定することで、AIの出力品質を担保できる**。

#### フェーズ1: 戦略設計のガードレール
- **既存設計との整合性確認**: システム全体への影響をAIは考慮できないため
- **シニアエンジニアによるレビュー**: アーキテクチャの最終決定は人間が行う
- **ドメイン知識の事前共有**: 複雑なビジネスルールを理解させる

#### フェーズ2: 実装・量産のガードレール
- **コーディング規約の遵守**: N+1問題回避、コードの一貫性確保
- **セキュリティと品質保証**: CI/CDパイプラインでの自動テスト

#### フェーズ3: レビュー・リファクタリングのガードレール
- **レビュー観点の標準化**: ビジネスロジックの整合性、パフォーマンス影響の確認
- **最終的な品質責任は人間**: AIの提案を鵜呑みにしない

#### フェーズ4: テストのガードレール
- **テストカバレッジの確認**: 生成されたテストケースの妥当性を人間がチェック

### 具体例・ケース

食べログでの具体的なガードレール：

**悪い指示例**（ガードレールなし）:
```
「APIを実装してください」
```
→ AIが勝手に実装方針を決め、チームの設計思想と乖離

**良い指示例**（ガードレールあり）:
```
「以下のルールに従ってAPIを実装してください：
- コントローラはリクエストの受付とレスポンス返却に徹する
- ビジネスロジックのバリデーションはUsecase層に実装する
- N+1問題を避けるため、関連データは事前にeager loadする
- テーブル定義: [予約テーブルの構造を記載]」
```
→ チームの暗黙知を明文化し、AIの実装がブレない

### 反論・限界・条件

- ガードレールを作成するには、チームのルールを言語化できる必要がある
- ガードレールが厳しすぎるとAIの柔軟性が失われる
- プロジェクトごとにガードレールをカスタマイズする必要がある

## 関連ノート（Links）

- [[20251129160317-ai-role-division-what-why-how|AI連携開発における役割分担の原則]] AI連携開発における役割分担の原則
- [[20251129160318-autonomous-ai-vs-coding-assistant|自律型AIとコーディングアシスタントの使い分け]] 自律型AIとコーディングアシスタントの使い分け
- [[20251129160321-ai-delegation-failure-patterns|AI丸投げの失敗パターン]] AI丸投げの失敗パターン

## To-Do / 次に考えること

- [ ] 自チームのコーディング規約を明文化する
- [ ] AIへの指示書テンプレートにガードレールを組み込む
- [ ] ガードレール遵守度を測定する方法を検討する
