---
id: 2025-11-29-160321
title: AI丸投げの失敗パターン
created: 2025-11-29 16:03:21
updated: 2025-11-29 16:03:21
tags:
  - zettel
  - ai
  - anti-patterns
  - quality-management
source:
  type: article
  ref: "食べログ技術ブログ - 実装の9割をAIに任せる"
---

## 要約（Summary）

- 自律型AIへの「丸投げ」は、一見自律的に動いているように見えるが、詳細レビューで多くの問題が発覚する
- 代表的な失敗パターンは「設計思想の無視」「N+1問題の発生」「不可解な自己修正」
- これらは「AIが暗黙的なルールを理解できない」ことに起因する

## 本文（Body）

自律型AIに実装を完全に任せる「丸投げ」アプローチは、短期的には効率的に見えるが、レビューと修正のコストを増大させる。

### 背景・問題意識

自律型AIの登場により「すべてAIに任せれば良い」という期待があったが、実際には多くの品質問題が発生した。食べログでの実験では、丸投げによってレビューコストが逆に増大した。

### アイデア・主張

**AIへの丸投げは3つの典型的な失敗パターンを引き起こす**。これらを理解し、適切なガードレールを設定することが重要。

#### 失敗パターン1: 設計思想の無視

**現象**: チーム固有の暗黙的な設計ルールを理解できず、一般的なベストプラクティスで実装してしまう。

**具体例**:
- リクエストパラメータのバリデーションをコントローラ層に実装すべきところ、Usecase層と混濁
- レイヤードアーキテクチャの責務分離を無視した実装

**原因**: AIは明示的に指示されていないルールを推測できない

#### 失敗パターン2: N+1問題の発生

**現象**: パフォーマンスを考慮せず、安易にN+1クエリを生成してしまう。

**具体例**:
```ruby
# AIが生成したコード（悪い例）
users.each do |user|
  user.posts.each do |post|  # N+1クエリが発生
    # 処理
  end
end

# 期待されるコード
users.includes(:posts).each do |user|  # eager loading
  user.posts.each do |post|
    # 処理
  end
end
```

**原因**: AIは「動くコード」を優先し、パフォーマンスへの配慮が後回しになる

#### 失敗パターン3: 不可解な自己修正

**現象**: 一度正しく修正されたコードが、テスト失敗をトリガーに元の問題があるコードへロールバックされる。

**具体例**:
1. 初回実装でN+1問題を含むコードを生成
2. レビュー指摘でeager loadingに修正
3. 別のテストが失敗
4. AIが「修正が原因」と誤判断し、元のN+1コードに戻す

**原因**: AIは局所的な問題解決を優先し、全体最適を見失う

### 具体例・ケース

食べログでの実験結果：
- **実験②（丸投げ）**: 実装は速いが、レビューで多数の問題が発覚し、修正指示のコストが増大
- **実験③（ハイブリッド）**: ガードレールを設定し、人間が品質担保に集中することで、トータルのコストが削減

### 反論・限界・条件

- AIの進化により、これらの問題は将来的に改善される可能性がある
- 単純なCRUD実装など、定型的すぎるタスクでは丸投げでも問題が少ない場合がある
- ガードレールを設定するコストと、丸投げの修正コストを比較する必要がある

## 関連ノート（Links）

- [[20251129160319-ai-guardrails|AI開発におけるガードレールの重要性]] AI開発におけるガードレールの重要性
- [[20251129160317-ai-role-division-what-why-how|AI連携開発における役割分担の原則]] AI連携開発における役割分担の原則
- [[20251129160318-autonomous-ai-vs-coding-assistant|自律型AIとコーディングアシスタントの使い分け]] 自律型AIとコーディングアシスタントの使い分け
- [[20251129165842-long-running-agent-failure-modes-solutions|長時間実行エージェントの失敗モードと対策]]

## To-Do / 次に考えること

- [ ] 自プロジェクトで発生しそうな失敗パターンをリストアップする
- [ ] 各失敗パターンを防ぐためのガードレールを設計する
- [ ] AIが生成したコードのレビューチェックリストを作成する
- [ ] N+1問題など、よくある品質問題の検出を自動化できないか検討する
